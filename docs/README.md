# Constructing docs with Sphinx

This README closely follows (this tutorial)[https://towardsdatascience.com/documenting-python-code-with-sphinx-554e1d6c4f6d] but some changes because of newer versions are required.

## Installation

You can install sphinx with ```apt-get``` on linux

```sudo apt-get install python3-sphinx```

and with pip in python (virtual environment recommended)

```python -m pip install sphinx```

## How to build the documentation

Create a directory called docs in the top level of your repository and move into that directory. Run ```sphinx-quickstart```. This will create a bunch of files and directories.

Open ```conf.py```, which was autogenerated after the above code, and add ```'sphinx.ext.autodoc', 'sphinx.ext.viewcode'``` to ```extensions = []```. The first option creates documentation from the docstrings in your code.

Move out of ```docs``` to your repositories top level directory and run

```sphinx-apidoc -o docs /path/to/source/files```

where the second path is replaced with the path to the directory you want to document. This generates a modules.rst to your ```docs``` folder. Move back into your docs folder.  Add ```modules``` under ```:caption: Contents:``` in your ```index.rst``` file.

Now, run ```make html``` to generate documentation in html formatting. It will appear in ```_build/source```.

## Change the Theme - Read the Docs

The instructions are also [here](https://sphinx-rtd-theme.readthedocs.io/en/stable/installing.html). In your python environment, run

```python -m pip install sphinx-rtd-theme```

In your ```conf.py``` file, make these changes:

```
extensions = [
    ...
    'sphinx_rtd_theme',
]

html_theme = "sphinx_rtd_theme"
```

Now, ```make html``` will produce the docs again but in a new theme.
